{"version":3,"sources":["components/PersonForm.js","services/person.js","components/Persons.js","components/Filter.js","components/Notification.js","components/App.js","index.js"],"names":["PersonForm","props","onSubmit","handleSubmit","value","newName","onChange","handleChange","newNumber","handleChangeInNumber","type","baseUrl","axios","get","then","response","data","person","post","id","delete","changedContact","put","Persons","persons","setPersons","setNotif","map","name","number","onClick","toDelete","find","window","confirm","setTimeout","Service","catch","error","filter","deletePerson","Filter","showFiltered","Notification","msg","className","App","useState","setNewName","setNewNumber","notif","addNumber","services","returnedPerson","concat","showNotif","console","log","modifyPerson","personToModify","checkIfNameExists","i","length","useEffect","initialPersons","event","toLowerCase","includes","target","preventDefault","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.66e1e2a7.chunk.js","sourcesContent":["const PersonForm = (props) => {\r\n  return (\r\n    <form onSubmit={props.handleSubmit}>\r\n      <div>\r\n        name: <input value={props.newName} onChange={props.handleChange} />\r\n        <br></br>\r\n        number:{\" \"}\r\n        <input value={props.newNumber} onChange={props.handleChangeInNumber} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import axios from \"axios\";\r\n// heroku url: https://morning-woodland-02061.herokuapp.com\r\n\r\nconst baseUrl = \"/api/persons/\";\r\n\r\nconst getAllNumbers = () =>\r\n  axios.get(baseUrl).then((response) => response.data);\r\n\r\nconst addPerson = (person) => {\r\n  return axios.post(baseUrl, person).then((response) => response.data);\r\n};\r\n\r\nconst deletePerson = (id) => {\r\n  const request = axios.delete(`${baseUrl}${id}`); // here person will be deleted\r\n\r\n  // sending no content, but if there were person not existing\r\n  // have to send this response to catch the error\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst updatePerson = (changedContact) =>\r\n  axios\r\n    .put(`${baseUrl}${changedContact.id}`, changedContact)\r\n    .then((response) => response.data);\r\n\r\nexport default { getAllNumbers, addPerson, deletePerson, updatePerson };\r\n","import Service from \"../services/person\";\r\n\r\nconst Persons = ({ persons, setPersons, setNotif }) => {\r\n  const deletePerson = (id) => {\r\n    const toDelete = persons.find((person) => person.id === id);\r\n    const shouldDelete = window.confirm(`Delete ${toDelete.name} ?`);\r\n\r\n    if (shouldDelete) {\r\n      setNotif(`${toDelete.name} deleted successfully`);\r\n      setTimeout(() => setNotif(null), 5000);\r\n\r\n      Service.deletePerson(id).catch((error) => {\r\n        setNotif(`${toDelete.name} is already removed`);\r\n        setTimeout(() => setNotif(null), 5000);\r\n      });\r\n      setPersons(persons.filter((person) => person.id !== id));\r\n    }\r\n  };\r\n  return (\r\n    <div>\r\n      {persons.map((person) => (\r\n        <div key={person.name}>\r\n          {person.name} {person.number}{\" \"}\r\n          <button onClick={() => deletePerson(person.id)}>delete</button>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","const Filter = ({ showFiltered }) => {\r\n  return (\r\n    <div>\r\n      filter shown with <input onChange={showFiltered} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","const Notification = ({ msg }) => {\r\n\r\n  if (msg === null) return null;\r\n\r\n  return <div className='notif'>{msg}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import { useEffect, useState } from \"react\";\r\nimport PersonForm from \"./PersonForm\";\r\nimport Persons from \"./Persons\";\r\nimport Filter from \"./Filter\";\r\nimport services from \"../services/person\";\r\nimport Notification from \"./Notification\";\r\nimport \"../index.css\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [notif, setNotif] = useState(null);\r\n\r\n  const handleChange = (event) => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    const person = {\r\n      name: newName,\r\n      number: newNumber,\r\n    };\r\n\r\n    if (checkIfNameExists(persons, newName)) {\r\n      const addNewOrNot = window.confirm(\r\n        `${newName} added to the phonebook, replace it with new number?`\r\n      );\r\n\r\n      if (addNewOrNot) {\r\n        modifyPerson(person, newName);\r\n        setNotif(`${person.name} modified`);\r\n        showNotif();\r\n      }\r\n    } else {\r\n      addNumber(person);\r\n    }\r\n  };\r\n\r\n  const addNumber = (person) => {\r\n    services\r\n      .addPerson(person)\r\n      .then((returnedPerson) => {\r\n        setPersons(persons.concat(returnedPerson));\r\n        setNewName(\"\");\r\n        setNewNumber(\"\");\r\n        setNotif(`${returnedPerson.name} added successfully`);\r\n        showNotif();\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"FROM FRONTEND\", error.response.data.error);\r\n        setNotif(error.response.data.error);\r\n        showNotif();\r\n      });\r\n  };\r\n\r\n  const modifyPerson = (person, name) => {\r\n    const personToModify = persons.find((person) => person.name === name);\r\n    const changedContact = { ...personToModify, number: person.number };\r\n    services.updatePerson(changedContact).then((changedContact) => {\r\n      setPersons(\r\n        persons.map((person) =>\r\n          person.name === changedContact.name ? changedContact : person\r\n        )\r\n      );\r\n    });\r\n  };\r\n\r\n  const checkIfNameExists = (persons, name) => {\r\n    let i = 0;\r\n    while (i !== persons.length) {\r\n      // console.log(persons[i].name, name);\r\n      if (persons[i].name === name) return true;\r\n      i++;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  const handleChangeInNumber = (event) => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  const showFiltered = (event) => {\r\n    setPersons(\r\n      persons.filter((person) =>\r\n        person.name.toLowerCase().includes(event.target.value)\r\n      )\r\n    );\r\n  };\r\n\r\n  const hook = () => {\r\n    services\r\n      .getAllNumbers()\r\n      .then((initialPersons) => setPersons(initialPersons));\r\n  };\r\n\r\n  const showNotif = () => {\r\n    setTimeout(() => {\r\n      setNotif(null);\r\n    }, 5000);\r\n  };\r\n\r\n  useEffect(hook, []);\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification msg={notif} />\r\n      <Filter showFiltered={showFiltered} />\r\n      <h2>add a new</h2>\r\n      <PersonForm\r\n        handleChange={handleChange}\r\n        handleChangeInNumber={handleChangeInNumber}\r\n        handleSubmit={handleSubmit}\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n      />\r\n      <h2>Number</h2>\r\n      <Persons persons={persons} setPersons={setPersons} setNotif={setNotif} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import ReactDOM from \"react-dom\"\nimport App from \"./components/App\"\n\nReactDOM.render(<App />, document.getElementById(\"root\"))"],"sourceRoot":""}